phases:
  - name: PeriodicLoad
    repeat: 5000

    client:
      workers:
        - instances: 5
          duration: 2m
          delay: 10ms
        - instances: 10
          duration: 2m
          delay: 10ms
        - instances: 20
          duration: 2m
          delay: 10ms
        - instances: 30
          duration: 2m
          delay: 10ms
        - instances: 40
          duration: 5m
          delay: 10ms
        - instances: 30
          duration: 5m
          delay: 10ms
        - instances: 20
          duration: 2m
          delay: 10ms
        - instances: 10
          duration: 2m
          delay: 10ms
        - instances: 5
          duration: 2m
          delay: 10ms

    workload:
      actions:
       # Send request to cart
        - name: HTTPRequest
          config:
            url: http://cart:8080
            body:
              actions:
                - name: Burn
                  config:
                    duration: 50ms
                
                # Send request to shipping
                - name: HTTPRequest
                  config:
                    url: http://shipping:8080
                    body:
                      actions:
                        - name: Burn
                          config:
                            duration: 50ms

                        # Send request to payment
                        - name: HTTPRequest
                          config:
                            url: http://payment:8080
                            body:
                              actions:
                                - name: Burn
                                  config:
                                    duration: 50ms
                # Send request to product
                - name: HTTPRequest
                  config:
                    url: http://product:8080
                    body:
                      actions:
                        - name: Burn
                          config:
                            duration: 50ms